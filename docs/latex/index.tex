\label{index_md_Top}%
\Hypertarget{index_md_Top}%
 

        \hypertarget{index_autotoc_md1}{}\doxysection{C++でもpandasみたいなことがしたい!}\label{index_autotoc_md1}
ということを目標に開発を始めた\+CSV Parserです.


\begin{DoxyItemize}
\item \href{\#pandas-like-csv-parser}{\texttt{ Pandas-\/like CSV Parser}}
\item \href{\#c\%E3\%81\%A7\%E3\%82\%82pandas\%E3\%81\%BF\%E3\%81\%9F\%E3\%81\%84\%E3\%81\%AA\%E3\%81\%93\%E3\%81\%A8\%E3\%81\%8C\%E3\%81\%97\%E3\%81\%9F\%E3\%81\%84}{\texttt{ C++でもpandasみたいなことがしたい!}}
\item \href{\#\%E5\%9F\%BA\%E6\%9C\%AC\%E6\%83\%85\%E5\%A0\%B1}{\texttt{ 基本情報}}
\item \href{\#\%E4\%BD\%BF\%E3\%81\%84\%E6\%96\%B9}{\texttt{ 使い方}}
\begin{DoxyItemize}
\item \href{\#\%E9\%85\%8D\%E5\%B8\%83\%E7\%89\%A9--\%E3\%83\%87\%E3\%82\%A3\%E3\%83\%AC\%E3\%82\%AF\%E3\%83\%88\%E3\%83\%AA\%E6\%A7\%8B\%E9\%80\%A0}{\texttt{ 配布物 \& ディレクトリ構造}}
\item \href{\#\%E3\%82\%B5\%E3\%83\%B3\%E3\%83\%97\%E3\%83\%AB\%E3\%83\%97\%E3\%83\%AD\%E3\%82\%B0\%E3\%83\%A9\%E3\%83\%A0\%E3\%81\%AE\%E4\%BD\%BF\%E3\%81\%84\%E6\%96\%B9}{\texttt{ サンプルプログラムの使い方}}
\item \href{\#\%E7\%B0\%A1\%E5\%8D\%98\%E3\%81\%AAapi\%E3\%83\%AA\%E3\%83\%95\%E3\%82\%A1\%E3\%83\%AC\%E3\%83\%B3\%E3\%82\%B9}{\texttt{ 簡単な\+APIリファレンス}}
\end{DoxyItemize}
\item \href{\#\%E7\%94\%9F\%E3\%81\%BE\%E3\%82\%8C\%E3\%81\%9F\%E7\%B5\%8C\%E7\%B7\%AF}{\texttt{ 生まれた経緯}}
\end{DoxyItemize}\hypertarget{index_autotoc_md2}{}\doxysection{基本情報}\label{index_autotoc_md2}

\begin{DoxyItemize}
\item Author\+: Keasha 改め K. Kotera.
\item 開発開始日\+: 2024/10/30-\/.
\item Version\+: beta 1.\+0 (2024/10/31).
\item Header only?\+: YES. 単一\+Headerで配布(他のライブラリとの兼ね合いで今後変わるかもしれないけど全部\+Header onlyにはする).
\item 動作環境
\begin{DoxyItemize}
\item コンパイラ\+: C++14以上 (機能としては\+C++11のもののみを使ってるので\+C++11でも動作はするはず).
\item OS\+: Linux(\+Ubuntu, Cent\+OS)は確認済み、\+Windowsでもwslを使えばいける.
\begin{DoxyItemize}
\item ただし\+Linux使用を想定してるため、改行コードが違う\+Windowsや\+Macでは動作がうまくいかないと思われ(ref\+: \href{https://www.tohoho-web.com/wwwxx011.htm}{\texttt{ とほほ}})
\item 暇があれば対応したいわね.
\end{DoxyItemize}
\end{DoxyItemize}
\item ライセンス\+: MIT
\end{DoxyItemize}\hypertarget{index_autotoc_md3}{}\doxysection{使い方}\label{index_autotoc_md3}
\hypertarget{index_autotoc_md4}{}\doxysubsection{配布物 \& ディレクトリ構造}\label{index_autotoc_md4}

\begin{DoxyItemize}
\item {\bfseries{配布物}}
\item {\ttfamily \mbox{\hyperlink{KDataFrame_8h}{KData\+Frame.\+h}}}\+: {\bfseries{これが本体}}.
\item {\ttfamily \mbox{\hyperlink{test_8c}{test.\+c}}}\+: サンプルプログラム.
\item {\ttfamily test.\+csv}\+: 適当に作ったサンプル用csvファイル.
\item {\bfseries{ディレクトリ構造}}
\end{DoxyItemize}


\begin{DoxyCode}{0}
\DoxyCodeLine{. \# 以下の作業ではここが基準になります}
\DoxyCodeLine{├─ header}
\DoxyCodeLine{|  └─ KDataFrame.h \# これがメイン}
\DoxyCodeLine{├─ pics \# (関係なし)}
\DoxyCodeLine{└─ sample}
\DoxyCodeLine{   ├─ test.c \# テスト用のファイル}
\DoxyCodeLine{   └─ test.csv \# テスト用のcsvファイル}

\end{DoxyCode}
\hypertarget{index_autotoc_md5}{}\doxysubsection{サンプルプログラムの使い方}\label{index_autotoc_md5}
サンプルプログラムを動かすには$\ast$$\ast$配布物をすべて同じディレクトリに配置$\ast$$\ast$してください。(メインのヘッダファイルはサンプルと混ざって理由がわからなくならないように配布時にはわざと分けています) なので、まずカレントディレクトリ「配布物」で列挙したファイルをすべてコピーします。


\begin{DoxyCode}{0}
\DoxyCodeLine{cp header/KDataFrame.h .}
\DoxyCodeLine{cp sample/test* .}

\end{DoxyCode}


もちろん自分で{\ttfamily \mbox{\hyperlink{test_8c}{test.\+c}}}を書いてくれてもおｋ (関数の説明も兼ねて\href{\#\%E7\%B0\%A1\%E5\%8D\%98\%E3\%81\%AAapi\%E3\%83\%AA\%E3\%83\%95\%E3\%82\%A1\%E3\%83\%AC\%E3\%83\%B3\%E3\%82\%B9}{\texttt{ 次節}}で解説).とりまここまですればこうなってるはず


\begin{DoxyCode}{0}
\DoxyCodeLine{. }
\DoxyCodeLine{├─ KDataFrame.h \# コピーしたやつ}
\DoxyCodeLine{├─ test.c \# コピーしたやつ}
\DoxyCodeLine{├─ test.csv \# コピーしたやつ}
\DoxyCodeLine{├─ header}
\DoxyCodeLine{├─ pics}
\DoxyCodeLine{└─ sample}

\end{DoxyCode}


あとは普通にコンパイルするだけ(ヘッダオンリーだから楽だね!)


\begin{DoxyCode}{0}
\DoxyCodeLine{g++ test.c -\/o test.out}

\end{DoxyCode}


実行


\begin{DoxyCode}{0}
\DoxyCodeLine{./test.out}

\end{DoxyCode}


実行したら下の図の感じになっているはず。

\hypertarget{index_autotoc_md6}{}\doxysubsection{簡単な\+APIリファレンス}\label{index_autotoc_md6}
{\ttfamily \mbox{\hyperlink{test_8c}{sample/test.\+c}}}にあるコードが現状できることのすべてレベル.


\begin{DoxyCode}{0}
\DoxyCodeLine{ \{c++\}}
\DoxyCodeLine{\#include <iostream>}
\DoxyCodeLine{\#include <vector>}
\DoxyCodeLine{\#include "{}KDataFrame.h"{}}
\DoxyCodeLine{}
\DoxyCodeLine{int main (int argc, char **argv)}
\DoxyCodeLine{\{}
\DoxyCodeLine{    KDataFrame df("{}./test.csv"{});}
\DoxyCodeLine{    }
\DoxyCodeLine{    // カラムの一覧を表示(名前、年齢、身長)}
\DoxyCodeLine{    std::cout<<"{}Key: "{}<<df.GetDFInfo().Keys()<<std::endl; }
\DoxyCodeLine{}
\DoxyCodeLine{    df.Scan(); // csv内のデータの情報を表で表示}
\DoxyCodeLine{}
\DoxyCodeLine{    // データの取り出し}
\DoxyCodeLine{    // 文字列でいいとき}
\DoxyCodeLine{    auto Data0 =  df["{}Name"{}];}
\DoxyCodeLine{    for(auto \&v : Data0) std::cout<<v<<"{}, "{};}
\DoxyCodeLine{    std::cout<<"{}\(\backslash\)n"{};}
\DoxyCodeLine{    }
\DoxyCodeLine{    // 上と同じ意味}
\DoxyCodeLine{    // df["{}Name"{}] <=> df.GetcolumnStr("{}Name"{})}
\DoxyCodeLine{    auto Data1 = df.GetcolumnStr("{}Name"{});}
\DoxyCodeLine{    for(auto \&v : Data1) std::cout<<v<<"{}, "{};}
\DoxyCodeLine{    std::cout<<"{}\(\backslash\)n"{};}
\DoxyCodeLine{}
\DoxyCodeLine{    std::cout<<"{}\(\backslash\)n"{};}
\DoxyCodeLine{}
\DoxyCodeLine{    // 数字として取り出したい(文字列をキャストして取り出したい)とき}
\DoxyCodeLine{    auto Data = df.Get<int>("{}Age"{});}
\DoxyCodeLine{    for(auto \&v : Data) std::cout<<v<<"{}, "{};}
\DoxyCodeLine{    std::cout<<"{}\(\backslash\)n"{};}
\DoxyCodeLine{}
\DoxyCodeLine{    return 0;}
\DoxyCodeLine{\}}

\end{DoxyCode}


解説としては以下の通り.


\begin{DoxyItemize}
\item ローカルに置いて使っているので{\ttfamily \#include}は二重引用符(\char`\"{}\char`\"{}).
\item {\ttfamily \mbox{\hyperlink{classKDataFrame}{KData\+Frame}} df(\char`\"{}./test.\+csv\char`\"{})}\+: constructor. 読み込みたいファイル名を指定.
\item {\ttfamily df.\+Get\+DFInfo().Keys()}\+: キーを取得.
\begin{DoxyItemize}
\item {\ttfamily df.\+Get\+DFInfo()}\+: CSVの情報を取得している.
\end{DoxyItemize}
\item {\ttfamily df.\+Scan()}\+: csvの内容を表形式で表示. {\bfseries{NOTE\+: 長すぎるとカットされる.}}
\item データの取得\+:
\begin{DoxyItemize}
\item 文字列でいいとき(後で整数なり少数なりに変換するとき)\+:
\begin{DoxyItemize}
\item {\ttfamily df\mbox{[}\char`\"{}カラム名\char`\"{}\mbox{]}}で取得できる. これは{\ttfamily df.\+Getcolumn\+Str(\char`\"{}カラム名\char`\"{})}と同じ.
\end{DoxyItemize}
\item 数字などの別の型で取り出したいとき\+:
\begin{DoxyItemize}
\item {\ttfamily df.\+Get$<$型$>$(\char`\"{}カラム名\char`\"{})}
\item テスト段階であることもあって{\ttfamily int}, {\ttfamily double}のみ対応. これから増やしていく.
\end{DoxyItemize}
\end{DoxyItemize}
\end{DoxyItemize}

\mbox{[}リファレンスガイド(作成中)\mbox{]}()\hypertarget{index_autotoc_md7}{}\doxysection{生まれた経緯}\label{index_autotoc_md7}
上に書いてあることがすべてみたいなところがあるが… 数年前、別の\+CSV Parserを作って使っていたのだけど、それを改造中に本業が忙しくなり放置してたら壊れちゃった…しかも数千行くらいあるからなにがなんだかわからん! ので一年くらい毎回毎回\+CSVのプログラムを書いていたのだけど、\+C++で\+CSVのプログラムを書いているとカラムが増えたときの対応が大変！例えば…

\char`\"{}\+Age\char`\"{}という名前のカラムは読み出したデータの配列のx番目だから配列(vector)のx番目を指定して…

っていうのを何度も考えないといけない。クソめんどい。\+Pythonの\href{https://pandas.pydata.org/}{\texttt{ pandas}}モジュールなら


\begin{DoxyCode}{0}
\DoxyCodeLine{df["{}Age"{}]}

\end{DoxyCode}


だけで全部のデータを一気に取ってこれる！。これがほしい。というか昔作ってたのはそれができたし、何なら書き出しもできた… ということで「せめて読み出しだけはできるようにしよう…そのほうが結局時短になるわ…」ということで再開発を始めることに…

最終的には読み書きができることを目標です. 